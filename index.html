<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flappy Bird - Dark Theme - Mobile</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <style>
        body {
            font-family: sans-serif;
            overflow: hidden;
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background-color: #121212;
        }

        #game-container {
            position: relative;
            width: 95%;
            max-width: 400px;
            height: 90vh;
            max-height: 600px;
            border: 2px solid #ddd;
            background-color: #1e1e1e;
            overflow: hidden;
        }

        #bird {
            position: absolute;
            left: 12.5%;
            top: 33.33%;
            font-size: 7vw;
            max-font-size: 30px;
            color: #ffd700;
            z-index: 10;
            transform-origin: center;
        }

        .pipe {
            position: absolute;
            width: 15%;
            max-width: 60px;
            background-color: #4CAF50;
            box-sizing: border-box;
            left: 100%;
            border: 3px solid #2E7D32;
            border-radius: 5px;
        }

        .pipe-top { top: 0; }
        .pipe-bottom { bottom: 0; }

        #top-bar {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: auto;
            background-color: rgba(0, 0, 0, 0.5);
            color: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 2% 2%;
            z-index: 10;
            box-sizing: border-box;
        }

        #score-display, #rocket-count-display {
            display: flex;
            align-items: center;
            font-size: 4vw;
            max-font-size: 18px;
        }

        #score-display i, #rocket-count-display i {
            margin-right: 5px;
            font-size: 6vw;
            max-font-size: 24px;
        }

        #game-over-screen {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 20px;
            border-radius: 10px;
            display: none;
            z-index: 20;
            text-align: center;
        }
         #instructions {
            margin-bottom: 10px;
            font-size:  4vw;
            max-font-size: 16px;
          }

        #restart-button {
            margin-top: 10px;
            padding: 2vw 4vw;
            font-size: 4vw;
            max-font-size: 16px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        #restart-button:hover { background-color: #3e8e41; }

        .rocket {
            position: absolute;
            width: 2.5%;
            max-width: 10px;
            height: auto;
            background-color: transparent;
            z-index: 5;
        }

        .rocket i {
            color: red;
            font-size: 5vw;
            max-font-size: 20px;
        }

        #final-score {
            font-size: 6vw;
            max-font-size: 25px;
            font-weight: bold;
        }

    </style>
</head>
<body>
    <div id="game-container">
        <div id="top-bar">
            <div id="score-display"><i class="fas fa-star"></i><span id="score-value">0</span></div>
            <div id="rocket-count-display"><i class="fas fa-rocket"></i><span id="rocket-value">0</span></div>
        </div>
        <div id="bird"><i class="fas fa-dove"></i></div>

        <div id="game-over-screen">
           <div id="instructions">
              Tap to jump, swipe right to shoot.
             </div>
            <h2>Game Over</h2>
            <p id="final-score"></p>
            <button id="restart-button">Restart</button>
        </div>
    </div>

    <script>
      const bird = document.getElementById('bird');
const gameContainer = document.getElementById('game-container');
const scoreDisplayValue = document.getElementById('score-value');
const rocketCountDisplayValue = document.getElementById('rocket-value');
const gameOverScreen = document.getElementById('game-over-screen');
const finalScoreDisplay = document.getElementById('final-score');
const restartButton = document.getElementById('restart-button');

let birdY = 200;
let birdVelocity = 0;
const gravity = 0.5;
const jumpStrength = -8;
let gameLoopInterval;
let pipeSpawnInterval;
let score = 0;
let isGameOver = false;
let pipes = [];
let pipeSpeed = 2;
let rockets = [];
let rocketCount = 0;
const ROCKET_SPEED = 8;
let pipesPassedForRocket = 0;

let scoreToDisplay = 0;

let rocketBoostTimeout = null;


let touchStartX = 0;
let touchStartY = 0;



function startGame() {

  isGameOver = false; //set Game State - variable state of general, on new game
  birdY = gameContainer.offsetHeight * 0.3333;  // bird position set correctly on initial Y axys. 33% correctly - to

 birdVelocity = 0; // set and keep ,velocity as intial, withouot jump for

 score = 0; //Resets to set score value correct initial value, restart correct
    scoreToDisplay = 0; //sets intials, correct.
    rocketCount = 0;   //rocket initial  initial variable value, not rocket as available. (new one after every two pased pipe

pipesPassedForRocket = 0;   //set  count passed, restting too to star- pipes to
 scoreDisplayValue.textContent = "0";
 rocketCountDisplayValue.textContent =  "0";

    pipes = [];  //cleared general objects pips.

    rockets = [];   //Clear rockest internal arrray objects

  gameOverScreen.style.display = 'none';

  document.querySelectorAll('.pipe, .rocket').forEach(el => el.remove());
   clearTimeout(rocketBoostTimeout); //clear timer bird . Clean up to last
 // add and creates a game (game loop). Every time add loop time - set a interval (set)

      gameLoopInterval = setInterval(gameLoop, 20);  //

 pipeSpawnInterval = setInterval(spawnPipe, 1500);  //Add pipes spawn intervales. Spawn-created and displayed and add games in game  ,
  //  initial bird correct to position to star playing in start
        bird.style.top = birdY + 'px'; //Bird display  in Top - and Y axix
    bird.style.transform = 'rotate(0deg)'; //reset as first and  in games. Rotate

}
function jump() {
    if (!isGameOver) {
     birdVelocity = jumpStrength;

 bird.style.transform = 'rotate(-20deg)';  //
   }

}

 function shootRocket() {
 if (!isGameOver && rocketCount > 0) {
    rocketCount--;

      rocketCountDisplayValue.textContent = rocketCount;

      const rocket = document.createElement('div');
        rocket.classList.add('rocket');

      rocket.innerHTML = '<i class="fas fa-rocket"></i>';  // Set rockt image in game, display style for a good view of all rocket that travel game - game

      rocket.style.left = bird.offsetLeft + bird.offsetWidth + 'px';  // left horizontal of screen,
    rocket.style.top = bird.offsetTop + bird.offsetHeight / 2 + 'px';   // bird Y to center top
  gameContainer.appendChild(rocket);
    rockets.push({ element: rocket, x: parseFloat(rocket.style.left) });  //push in rockets to new. Rockets array internal,

      // bird set velocity when rocket
     clearTimeout(rocketBoostTimeout);

      birdVelocity = 0;
  rocketBoostTimeout = setTimeout(() => { birdVelocity = gravity; }, 150); // apply back after
  }

   }

function spawnPipe() {
      if(isGameOver) return;

    const gapHeight = gameContainer.offsetHeight * 0.25; //get % value

      const minPipeHeight = gameContainer.offsetHeight * 0.083;
        const maxPipeHeight = gameContainer.offsetHeight - gapHeight - minPipeHeight;

         const topPipeHeight = Math.floor(Math.random() * (maxPipeHeight - minPipeHeight + 1)) + minPipeHeight;
         const bottomPipeHeight = gameContainer.offsetHeight - gapHeight - topPipeHeight;

    const topPipe = document.createElement('div');   // element top of a pipe that going though a left direction. Element add class styles for display

         topPipe.classList.add('pipe', 'pipe-top'); // Styles set with CSS name. ( add classes
   topPipe.style.height = `${topPipeHeight}px`; // get style

  gameContainer.appendChild(topPipe);  // display add and

      const bottomPipe = document.createElement('div');

        bottomPipe.classList.add('pipe', 'pipe-bottom');   // Add Bottom pipe style classes
   bottomPipe.style.height = `${bottomPipeHeight}px`;// display correctly on style

         gameContainer.appendChild(bottomPipe);

       pipes.push({ top: topPipe, bottom: bottomPipe, x: gameContainer.offsetWidth });

   }



 function gameLoop() {

    if (isGameOver) return;

    if (birdVelocity > 2) {
      bird.style.transform = 'rotate(45deg)';
    }
   else if (birdVelocity < -2)

      {
          bird.style.transform = 'rotate(-20deg)';
        }
    else {


    bird.style.transform = 'rotate(0deg)';
     }

      birdVelocity += gravity;  // add force of GRAVITY, value add- to get always - goes down at certain variable of speed gravity to drop as normal ( and gravity always set

   birdY += birdVelocity;
    bird.style.top = birdY + 'px';

 // Colissions bird- on top or roof .

          if (birdY + bird.offsetHeight > gameContainer.offsetHeight || birdY < 0)
     {  // top and  Bottom -

      gameOver();  // Bird-collision  in horizontal , ( on roof/  ceiling )  with TOP (top) of GAME or BOTTOM  ( floor )
          }

      //Rocket - rockets travel every element  in display. (as new elementes-

     for (let i = rockets.length - 1; i >= 0; i--)
      {
           rockets[i].x += ROCKET_SPEED;
      rockets[i].element.style.left = rockets[i].x + 'px'; // display to forward rocket to all new rockest (x++)


           for (let j = pipes.length - 1; j >= 0; j--) {

    if (rockets[i] &&

                   rockets[i].x + rockets[i].element.offsetWidth > pipes[j].x &&
                   rockets[i].x < pipes[j].x + pipes[j].top.offsetWidth &&


                    (rockets[i].element.offsetTop < pipes[j].top.offsetHeight || //rockert TOP

             rockets[i].element.offsetTop + rockets[i].element.offsetHeight > gameContainer.offsetHeight - pipes[j].bottom.offsetHeight))
                 {



           pipes[j].top.remove();  //TOP/ remove bottom (pipes get two objectes, two div.  Up and botto

            pipes[j].bottom.remove();


                    pipes.splice(j, 1);

                  rockets[i].element.remove();
                   rockets.splice(i,1);


                break; //removed pipes rockets
                 }


               }

            // check remove rockts - remove pipes. Rockes (array, object ) get removes, check remove pipes to clean elements
               if (rockets[i] && rockets[i].x > gameContainer.offsetWidth) {
            rockets[i].element.remove();

                 rockets.splice(i, 1);  // Delete - Remove


             }

 }

       for (let i = pipes.length - 1; i >= 0; i--) {   // pipes element

             pipes[i].x -= pipeSpeed;
     pipes[i].top.style.left = pipes[i].x + 'px';


       pipes[i].bottom.style.left = pipes[i].x + 'px';

         //Colision, Pipe with
       if (  // Horizontal, x + offset of pipes. All pips, that x- (move to forward is pipes[x].speed

                  bird.offsetLeft + bird.offsetWidth > pipes[i].x &&

           bird.offsetLeft < pipes[i].x + pipes[i].top.offsetWidth &&



                   (birdY < pipes[i].top.offsetHeight ||

                        birdY + bird.offsetHeight > gameContainer.offsetHeight - pipes[i].bottom.offsetHeight)

           )
           {
              gameOver();
       }
       if (pipes[i].x + pipes[i].top.offsetWidth < bird.offsetLeft && !pipes[i].scored)
             {

        pipes[i].scored = true;  //  One all- pipe pass

      score++;  // Actual

      scoreToDisplay = score; // Actual update to. Display
     pipesPassedForRocket++;  // to gain  , + 1 for 1 pipe passed, after earn x

         if (pipesPassedForRocket >= 2) {
              rocketCount++;  // increase total


            pipesPassedForRocket = 0;

        }
           scoreDisplayValue.textContent = scoreToDisplay;   //text to. Update rocket counts to top display value

            rocketCountDisplayValue.textContent = rocketCount;


      }

    //pipes remeves , get array off games to display ,

     if(pipes[i].x + pipes[i].top.offsetWidth < 0)
            {


      pipes[i].top.remove(); // removes ( x

                pipes[i].bottom.remove();  // Botto removes


           pipes.splice(i,1);   // object game remove and cleaned ,

            }
     }
 }

  function gameOver() {

          isGameOver = true;

      clearInterval(gameLoopInterval);

        clearInterval(pipeSpawnInterval);
 finalScoreDisplay.textContent = "Final Score: " + scoreToDisplay;

   gameOverScreen.style.display = "block";
    //   games. Display  with block - games set,
    //  Game Over Display
 clearTimeout(rocketBoostTimeout);   // Clear last Time bird boost, stop and restore correctly, for restart the correct user flaying actions
   }


  //
   gameContainer.addEventListener('touchstart', (event) => { //add for toch ( no matter

            event.preventDefault(); // Prevent

    touchStartX = event.touches[0].clientX;
  touchStartY = event.touches[0].clientY;

   jump();

});

 // Event Touched ( and touch removed),  Touch for rocket
  gameContainer.addEventListener('touchend', (event) => {

      event.preventDefault();


  const touchEndX = event.changedTouches[0].clientX;
    const touchEndY = event.changedTouches[0].clientY;

          const deltaX = touchEndX - touchStartX;


       const deltaY = touchEndY - touchStartY;

        if (Math.abs(deltaX) > Math.abs(deltaY) && deltaX > 50) {
             shootRocket(); //add and call shootRocket

          }

     });



     document.addEventListener('keydown', (event) => { //keyboard ( PC / Computer )

            if (event.code === 'Space') {

     jump();
        }else if (event.code === 'KeyX'){
            shootRocket();
         }

   });

   restartButton.addEventListener('click', startGame);  // Restar add , click new game start
        startGame();
     </script>
  </body>
   </html>
